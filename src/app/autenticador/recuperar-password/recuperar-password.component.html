<div class="login-split-screen">

    <!-- Panel Izquierdo - Branding -->
    <div class="login-branding gradient-purple">
        <div class="branding-content fade-in">
            <mat-icon class="brand-icon">lock_reset</mat-icon>
            <h1 class="brand-title">Recuperar Acceso</h1>
            <p class="brand-subtitle">No te preocupes, te ayudaremos a volver.</p>
        </div>
    </div>

    <!-- Panel Derecho - Formulario -->
    <div class="login-form-panel">
        <div class="form-container fade-in">

            <div class="form-header">
                <h2>¿Olvidaste tu contraseña?</h2>
                <p>Ingresa tu correo electrónico y te enviaremos instrucciones.</p>
            </div>

            <div *ngIf="!emailEnviado; else successMessage">
                <form [formGroup]="form" (ngSubmit)="recuperar()" class="login-form">

                    <!-- Email -->
                    <mat-form-field appearance="outline" class="form-field">
                        <mat-label>Correo Electrónico</mat-label>
                        <input matInput type="email" formControlName="email" placeholder="nombre@correo.com">
                        <mat-icon matSuffix>email</mat-icon>
                        <mat-error *ngIf="form.get('email')?.hasError('required')">
                            El email es requerido
                        </mat-error>
                        <mat-error *ngIf="form.get('email')?.hasError('email')">
                            Email inválido
                        </mat-error>
                    </mat-form-field>

                    <!-- Botón Enviar -->
                    <button mat-raised-button color="primary" class="btn-login" type="submit"
                        [disabled]="form.invalid || enviando">
                        <mat-spinner *ngIf="enviando" diameter="20"
                            style="display: inline-block; margin-right: 8px;"></mat-spinner>
                        <mat-icon *ngIf="!enviando">send</mat-icon>
                        {{ enviando ? 'ENVIANDO...' : 'ENVIAR INSTRUCCIONES' }}
                    </button>

                    <!-- Link a Login -->
                    <div class="form-footer">
                        <p>¿Te acordaste? <a routerLink="/login" class="link-secondary">Volver al inicio de sesión</a>
                        </p>
                    </div>

                </form>
            </div>

            <!-- Mensaje de Éxito -->
            <ng-template #successMessage>
                <div class="success-state text-center fade-in">
                    <mat-icon class="success-icon text-success"
                        style="font-size: 64px; height: 64px; width: 64px; color: #4caf50;">mark_email_read</mat-icon>
                    <h3 class="mt-3">¡Correo Enviado!</h3>
                    <p class="text-light">Hemos enviado las instrucciones de recuperación a <strong>{{
                            form.get('email')?.value }}</strong>.</p>
                    <p class="text-light text-small">Revisa tu bandeja de entrada y spam.</p>

                    <button mat-stroked-button color="primary" routerLink="/login" class="mt-4">
                        Volver al Login
                    </button>
                </div>
            </ng-template>

        </div>
    </div>

</div>